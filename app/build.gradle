plugins {
    id 'application'
}

repositories {
    jcenter()
}

dependencies {
    testImplementation 'junit:junit:4.13'
    implementation 'com.google.guava:guava:29.0-jre'
    implementation 'info.picocli:picocli:4.6.1'
    annotationProcessor 'info.picocli:picocli-codegen:4.6.1'
    implementation group: 'org.ow2.asm', name: 'asm', version: '9.1'
    implementation group: 'org.ow2.asm', name: 'asm-util', version: '9.1'
}

def projectName = "asmifier-cli"
application {
    mainClass = 'github.jackhenry.CLI'
}

startScripts {
    applicationName = projectName
}

distributions {
    main {
        distributionBaseName = projectName 
    }
}

jar {
    manifest {
        attributes("Main-Class": "github.jackhenry.CLI")
    }
    from {
        configurations.runtimeClasspath.collect { it.isDirectory() ? it : zipTree(it)}
    }
    archiveBaseName = projectName 
}